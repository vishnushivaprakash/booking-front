{"ast":null,"code":"import _objectSpread from\"C:/Users/AGNISHA/Desktop/book-my-show/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,createContext,useContext}from'react';import{BrowserRouter,Routes,Route,Navigate,useNavigate,Link,useParams}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API=import.meta.env.API_URL;// ============ CONTEXT ============\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>useContext(AuthContext);function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(()=>{const saved=localStorage.getItem('user');return saved?JSON.parse(saved):null;});const[city,setCity]=useState(()=>localStorage.getItem('city')||'Mumbai');const login=data=>{localStorage.setItem('user',JSON.stringify(data));if(data.selectedCity){localStorage.setItem('city',data.selectedCity);setCity(data.selectedCity);}setUser(data);};const logout=()=>{localStorage.removeItem('user');setUser(null);};const updateCity=async newCity=>{localStorage.setItem('city',newCity);setCity(newCity);if(user){await fetch(\"\".concat(API,\"/user/city\"),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({city:newCity})});}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout,city,updateCity},children:children});}// ============ NAVBAR ============\nfunction Navbar(){const{user,logout,city,updateCity}=useAuth();const[cities,setCities]=useState([]);const[showCities,setShowCities]=useState(false);const navigate=useNavigate();useEffect(()=>{fetch(\"\".concat(API,\"/cities\")).then(r=>r.json()).then(setCities);},[]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:()=>navigate('/'),style:{cursor:'pointer'},children:\"\\uD83C\\uDFAC BookMyShow\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"city-selector\",onClick:()=>setShowCities(!showCities),children:[\"\\uD83D\\uDCCD \",city,\" \\u25BC\",showCities&&/*#__PURE__*/_jsx(\"div\",{className:\"city-dropdown\",children:cities.map(c=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>{updateCity(c.name);setShowCities(false);},children:c.name},c._id))})]}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:user.email}),user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin'),children:\"Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/bookings'),children:\"My Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{logout();navigate('/login');},children:\"Logout\"})]})]})]});}// ============ AUTH ============\nfunction Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const res=await fetch(\"\".concat(API,\"/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok)throw new Error(data.error);login(data);navigate(data.role==='admin'?'/admin':'/');}catch(err){setError(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up\"})]})]});}function Signup(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{login}=useAuth();const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const res=await fetch(\"\".concat(API,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await res.json();if(!res.ok)throw new Error(data.error);login(data);navigate('/');}catch(err){setError(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]});}// ============ MOVIES ============\nfunction Movies(){const[movies,setMovies]=useState([]);const[offers,setOffers]=useState([]);const navigate=useNavigate();useEffect(()=>{fetch(\"\".concat(API,\"/movies\")).then(r=>r.json()).then(setMovies);fetch(\"\".concat(API,\"/offers\")).then(r=>r.json()).then(setOffers);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"movies-container\",children:[offers.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"offers-banner\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDF89 Offers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"offers-scroll\",children:offers.map(o=>/*#__PURE__*/_jsxs(\"div\",{className:\"offer-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"offer-code\",children:o.code}),/*#__PURE__*/_jsx(\"p\",{children:o.description})]},o._id))})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Now Showing\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-grid\",children:movies.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",onClick:()=>navigate(\"/movie/\".concat(movie._id)),children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.name,onError:e=>{// Fallback for broken images\nif(movie.name==='Inception'){e.target.src='https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_FMjpg_UX1000_.jpg';}else{e.target.src='https://via.placeholder.com/300x450?text='+encodeURIComponent(movie.name);}}}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:movie.name}),movie.avgRating&&/*#__PURE__*/_jsxs(\"span\",{className:\"rating\",children:[\"\\u2B50 \",movie.avgRating,\" (\",movie.reviewCount,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"genre\",children:[movie.genre,\" \\u2022 \",movie.duration]})]})]},movie._id))})]});}// ============ MOVIE DETAIL ============\nfunction MovieDetail(){var _movie$reviews;const{id}=useParams();const{city,user}=useAuth();const[movie,setMovie]=useState(null);const[theatres,setTheatres]=useState([]);const[selectedDate,setSelectedDate]=useState(new Date().toISOString().split('T')[0]);const[rating,setRating]=useState(0);const[comment,setComment]=useState('');const navigate=useNavigate();const dates=Array.from({length:5},(_,i)=>{const d=new Date();d.setDate(d.getDate()+i);return d.toISOString().split('T')[0];});useEffect(()=>{fetch(\"\".concat(API,\"/movies/\").concat(id)).then(r=>r.json()).then(setMovie);},[id]);useEffect(()=>{fetch(\"\".concat(API,\"/theatres?city=\").concat(city,\"&movieId=\").concat(id,\"&date=\").concat(selectedDate)).then(r=>r.json()).then(setTheatres);},[city,id,selectedDate]);const submitReview=async()=>{if(!rating)return;await fetch(\"\".concat(API,\"/reviews\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({movieId:id,rating,comment})});fetch(\"\".concat(API,\"/movies/\").concat(id)).then(r=>r.json()).then(setMovie);setRating(0);setComment('');};if(!movie)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-detail\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"movie-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.poster,alt:movie.name,onError:e=>{// Fallback for broken images\nif(movie.name==='Inception'){e.target.src='https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg';}else{e.target.src='https://via.placeholder.com/200x300?text='+encodeURIComponent(movie.name);}}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:movie.name}),/*#__PURE__*/_jsxs(\"p\",{children:[movie.genre,\" \\u2022 \",movie.duration,\" \\u2022 \",movie.language]}),movie.avgRating&&/*#__PURE__*/_jsxs(\"p\",{className:\"rating-big\",children:[\"\\u2B50 \",movie.avgRating,\"/5 (\",movie.reviewCount,\" reviews)\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"date-selector\",children:dates.map(d=>/*#__PURE__*/_jsx(\"button\",{className:d===selectedDate?'active':'',onClick:()=>setSelectedDate(d),children:new Date(d).toLocaleDateString('en-US',{weekday:'short',day:'numeric',month:'short'})},d))}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Theatres in \",city]}),theatres.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-shows\",children:\"No shows available for this date\"}):/*#__PURE__*/_jsx(\"div\",{className:\"theatres-list\",children:theatres.map(theatre=>/*#__PURE__*/_jsxs(\"div\",{className:\"theatre-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"theatre-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:theatre.name}),/*#__PURE__*/_jsx(\"p\",{children:theatre.address})]}),/*#__PURE__*/_jsx(\"div\",{className:\"shows-times\",children:theatre.shows.map(show=>/*#__PURE__*/_jsxs(\"button\",{className:\"show-time-btn\",onClick:()=>navigate(\"/seats/\".concat(show._id)),children:[show.time,/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"\\u20B9\",show.price]})]},show._id))})]},theatre._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Reviews\"}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"review-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"star-rating\",children:[1,2,3,4,5].map(s=>/*#__PURE__*/_jsx(\"span\",{onClick:()=>setRating(s),style:{cursor:'pointer',fontSize:'1.5rem'},children:s<=rating?'‚≠ê':'‚òÜ'},s))}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Write your review...\",value:comment,onChange:e=>setComment(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:submitReview,children:\"Submit Review\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"reviews-list\",children:(_movie$reviews=movie.reviews)===null||_movie$reviews===void 0?void 0:_movie$reviews.map(r=>{var _r$userId;return/*#__PURE__*/_jsxs(\"div\",{className:\"review-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:(_r$userId=r.userId)===null||_r$userId===void 0?void 0:_r$userId.email}),/*#__PURE__*/_jsx(\"span\",{children:'‚≠ê'.repeat(r.rating)})]}),/*#__PURE__*/_jsx(\"p\",{children:r.comment})]},r._id);})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate('/'),children:\"\\u2190 Back to Movies\"})]});}// ============ SEAT SELECTION ============\nfunction SeatSelection(){const{id}=useParams();const{user}=useAuth();const[show,setShow]=useState(null);const[selectedSeats,setSelectedSeats]=useState([]);const[offerCode,setOfferCode]=useState('');const[discount,setDiscount]=useState(0);const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{fetch(\"\".concat(API,\"/shows/\").concat(id)).then(r=>r.json()).then(setShow);},[id]);const toggleSeat=index=>{if(show.seats[index])return;setSelectedSeats(prev=>prev.includes(index)?prev.filter(s=>s!==index):[...prev,index]);};const validateOffer=async()=>{const amount=selectedSeats.length*show.price;const res=await fetch(\"\".concat(API,\"/offers/validate\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({code:offerCode,amount})});const data=await res.json();if(res.ok){setDiscount(data.discount);setError('');}else{setError(data.error);setDiscount(0);}};const proceedToPayment=async()=>{const res=await fetch(\"\".concat(API,\"/bookings\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({showId:id,seats:selectedSeats,offerCode:discount>0?offerCode:null})});const data=await res.json();if(res.ok){navigate('/payment',{state:_objectSpread(_objectSpread({bookingId:data.bookingId},data),{},{show})});}else{setError(data.error);}};if(!show)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});const totalAmount=selectedSeats.length*show.price-discount;return/*#__PURE__*/_jsxs(\"div\",{className:\"seats-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:show.movieId.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"show-info\",children:[show.theatreId.name,\" | \",show.date,\" | \",show.time]}),/*#__PURE__*/_jsx(\"div\",{className:\"screen\",children:\"SCREEN\"}),/*#__PURE__*/_jsx(\"div\",{className:\"seats-grid\",children:show.seats.map((booked,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"seat \".concat(booked?'booked':'',\" \").concat(selectedSeats.includes(i)?'selected':''),onClick:()=>toggleSeat(i),children:i+1},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"seat-legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-box available\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-box selected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-box booked\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Booked\"})]})]}),selectedSeats.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"booking-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offer-input\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter offer code\",value:offerCode,onChange:e=>setOfferCode(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:validateOffer,children:\"Apply\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-breakdown\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Seats: \",selectedSeats.map(s=>s+1).join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \\u20B9\",show.price,\" \\xD7 \",selectedSeats.length,\" = \\u20B9\",selectedSeats.length*show.price]}),discount>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"discount\",children:[\"Discount: -\\u20B9\",discount]}),/*#__PURE__*/_jsxs(\"p\",{className:\"total\",children:[\"Total: \\u20B9\",totalAmount]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn\",onClick:proceedToPayment,children:\"Proceed to Payment\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate(-1),children:\"\\u2190 Back\"})]});}// ============ PAYMENT ============\nfunction Payment(){var _window$history$state;const{user}=useAuth();const navigate=useNavigate();const bookingData=(_window$history$state=window.history.state)===null||_window$history$state===void 0?void 0:_window$history$state.usr;const[processing,setProcessing]=useState(false);const[paymentMethod,setPaymentMethod]=useState('card');if(!bookingData)return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});const handlePayment=async()=>{setProcessing(true);const res=await fetch(\"\".concat(API,\"/payment\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({bookingId:bookingData.bookingId,paymentMethod})});const data=await res.json();setProcessing(false);if(data.success){navigate('/confirmation',{state:data.booking});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:bookingData.show.movieId.name}),/*#__PURE__*/_jsx(\"p\",{children:bookingData.show.theatreId.name}),/*#__PURE__*/_jsxs(\"p\",{children:[bookingData.show.date,\" | \",bookingData.show.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Seats: \",bookingData.show&&bookingData.originalAmount/bookingData.show.price,\" seats\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal: \\u20B9\",bookingData.originalAmount]}),bookingData.discount>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"discount\",children:[\"Discount: -\\u20B9\",bookingData.discount]}),/*#__PURE__*/_jsxs(\"p\",{className:\"total-big\",children:[\"Total: \\u20B9\",bookingData.totalAmount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Payment Method\"}),['card','upi','netbanking','wallet'].map(method=>/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option \".concat(paymentMethod===method?'selected':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"payment\",value:method,checked:paymentMethod===method,onChange:e=>setPaymentMethod(e.target.value)}),method==='card'&&'üí≥ Credit/Debit Card',method==='upi'&&'üì± UPI',method==='netbanking'&&'üè¶ Net Banking',method==='wallet'&&'üëõ Wallet']},method))]}),/*#__PURE__*/_jsx(\"button\",{className:\"pay-btn\",onClick:handlePayment,disabled:processing,children:processing?'Processing...':\"Pay \\u20B9\".concat(bookingData.totalAmount)})]});}// ============ CONFIRMATION ============\nfunction Confirmation(){var _window$history$state2;const navigate=useNavigate();const booking=(_window$history$state2=window.history.state)===null||_window$history$state2===void 0?void 0:_window$history$state2.usr;if(!booking)return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"confirmation-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"checkmark\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Booking Confirmed!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ticket-header\",children:/*#__PURE__*/_jsx(\"h3\",{children:booking.movieName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ticket-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Theatre:\"}),\" \",booking.theatreName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date:\"}),\" \",booking.showDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Time:\"}),\" \",booking.showTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Seats:\"}),\" \",booking.seats.join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Amount Paid:\"}),\" \\u20B9\",booking.totalAmount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Booking ID:\"}),\" \",booking.id]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn\",onClick:()=>navigate('/'),children:\"Book More Tickets\"})]});}// ============ MY BOOKINGS ============\nfunction MyBookings(){const{user}=useAuth();const[bookings,setBookings]=useState([]);useEffect(()=>{fetch(\"\".concat(API,\"/bookings\"),{headers:{Authorization:\"Bearer \".concat(user.token)}}).then(r=>r.json()).then(setBookings);},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bookings-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Bookings\"}),bookings.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No bookings yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bookings-list\",children:bookings.map(b=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:b.movieName}),/*#__PURE__*/_jsx(\"p\",{children:b.theatreName}),/*#__PURE__*/_jsxs(\"p\",{children:[b.showDate,\" | \",b.showTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Seats: \",b.seats.join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{className:\"amount\",children:[\"\\u20B9\",b.totalAmount]})]},b._id))})]});}// ============ ADMIN PANEL ============\nfunction AdminPanel(){const{user}=useAuth();const[stats,setStats]=useState({});const[tab,setTab]=useState('dashboard');const[movies,setMovies]=useState([]);const[theatres,setTheatres]=useState([]);const[offers,setOffers]=useState([]);const[bookings,setBookings]=useState([]);const headers={Authorization:\"Bearer \".concat(user.token),'Content-Type':'application/json'};useEffect(()=>{fetch(\"\".concat(API,\"/admin/stats\"),{headers}).then(r=>r.json()).then(setStats);fetch(\"\".concat(API,\"/movies\")).then(r=>r.json()).then(setMovies);fetch(\"\".concat(API,\"/theatres\")).then(r=>r.json()).then(setTheatres);fetch(\"\".concat(API,\"/offers\")).then(r=>r.json()).then(setOffers);fetch(\"\".concat(API,\"/admin/bookings\"),{headers}).then(r=>r.json()).then(setBookings);},[]);const[newMovie,setNewMovie]=useState({name:'',poster:'',genre:'',duration:'',language:''});const[newTheatre,setNewTheatre]=useState({name:'',city:'',address:''});const[newOffer,setNewOffer]=useState({code:'',description:'',discountPercent:0,maxDiscount:0,validFrom:'',validTo:''});const addMovie=async()=>{await fetch(\"\".concat(API,\"/admin/movies\"),{method:'POST',headers,body:JSON.stringify(newMovie)});fetch(\"\".concat(API,\"/movies\")).then(r=>r.json()).then(setMovies);setNewMovie({name:'',poster:'',genre:'',duration:'',language:''});};const addTheatre=async()=>{await fetch(\"\".concat(API,\"/admin/theatres\"),{method:'POST',headers,body:JSON.stringify(newTheatre)});fetch(\"\".concat(API,\"/theatres\")).then(r=>r.json()).then(setTheatres);setNewTheatre({name:'',city:'',address:''});};const addOffer=async()=>{await fetch(\"\".concat(API,\"/admin/offers\"),{method:'POST',headers,body:JSON.stringify(newOffer)});fetch(\"\".concat(API,\"/offers\")).then(r=>r.json()).then(setOffers);setNewOffer({code:'',description:'',discountPercent:0,maxDiscount:0,validFrom:'',validTo:''});};const deleteMovie=async id=>{await fetch(\"\".concat(API,\"/admin/movies/\").concat(id),{method:'DELETE',headers});setMovies(movies.filter(m=>m._id!==id));};const deleteTheatre=async id=>{await fetch(\"\".concat(API,\"/admin/theatres/\").concat(id),{method:'DELETE',headers});setTheatres(theatres.filter(t=>t._id!==id));};const deleteOffer=async id=>{await fetch(\"\".concat(API,\"/admin/offers/\").concat(id),{method:'DELETE',headers});setOffers(offers.filter(o=>o._id!==id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-tabs\",children:['dashboard','movies','theatres','offers','bookings'].map(t=>/*#__PURE__*/_jsx(\"button\",{className:tab===t?'active':'',onClick:()=>setTab(t),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),tab==='dashboard'&&/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalUsers}),/*#__PURE__*/_jsx(\"p\",{children:\"Users\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalBookings}),/*#__PURE__*/_jsx(\"p\",{children:\"Bookings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u20B9\",stats.totalRevenue]}),/*#__PURE__*/_jsx(\"p\",{children:\"Revenue\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalMovies}),/*#__PURE__*/_jsx(\"p\",{children:\"Movies\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:stats.totalTheatres}),/*#__PURE__*/_jsx(\"p\",{children:\"Theatres\"})]})]}),tab==='movies'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Movie\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",value:newMovie.name,onChange:e=>setNewMovie(_objectSpread(_objectSpread({},newMovie),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Poster URL\",value:newMovie.poster,onChange:e=>setNewMovie(_objectSpread(_objectSpread({},newMovie),{},{poster:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Genre\",value:newMovie.genre,onChange:e=>setNewMovie(_objectSpread(_objectSpread({},newMovie),{},{genre:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Duration\",value:newMovie.duration,onChange:e=>setNewMovie(_objectSpread(_objectSpread({},newMovie),{},{duration:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Language\",value:newMovie.language,onChange:e=>setNewMovie(_objectSpread(_objectSpread({},newMovie),{},{language:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{onClick:addMovie,children:\"Add Movie\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-list\",children:movies.map(m=>/*#__PURE__*/_jsxs(\"div\",{className:\"admin-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:m.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteMovie(m._id),children:\"Delete\"})]},m._id))})]}),tab==='theatres'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Theatre\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",value:newTheatre.name,onChange:e=>setNewTheatre(_objectSpread(_objectSpread({},newTheatre),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"City\",value:newTheatre.city,onChange:e=>setNewTheatre(_objectSpread(_objectSpread({},newTheatre),{},{city:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Address\",value:newTheatre.address,onChange:e=>setNewTheatre(_objectSpread(_objectSpread({},newTheatre),{},{address:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{onClick:addTheatre,children:\"Add Theatre\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-list\",children:theatres.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:\"admin-item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[t.name,\" - \",t.city]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTheatre(t._id),children:\"Delete\"})]},t._id))})]}),tab==='offers'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Offer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-form\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Code\",value:newOffer.code,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{code:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\",value:newOffer.description,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{description:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Discount %\",value:newOffer.discountPercent,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{discountPercent:+e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Max Discount\",value:newOffer.maxDiscount,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{maxDiscount:+e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newOffer.validFrom,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{validFrom:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newOffer.validTo,onChange:e=>setNewOffer(_objectSpread(_objectSpread({},newOffer),{},{validTo:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{onClick:addOffer,children:\"Add Offer\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-list\",children:offers.map(o=>/*#__PURE__*/_jsxs(\"div\",{className:\"admin-item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[o.code,\" - \",o.description]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteOffer(o._id),children:\"Delete\"})]},o._id))})]}),tab==='bookings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-list\",children:bookings.map(b=>{var _b$userId;return/*#__PURE__*/_jsx(\"div\",{className:\"admin-item booking\",children:/*#__PURE__*/_jsxs(\"span\",{children:[(_b$userId=b.userId)===null||_b$userId===void 0?void 0:_b$userId.email,\" - \",b.movieName,\" - \",b.showDate,\" \",b.showTime,\" - Seats: \",b.seats.join(','),\" - \\u20B9\",b.totalAmount]})},b._id);})})]})]});}// ============ PROTECTED ROUTES ============\nfunction ProtectedRoute(_ref2){let{children}=_ref2;const{user}=useAuth();return user?children:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}function AdminRoute(_ref3){let{children}=_ref3;const{user}=useAuth();return(user===null||user===void 0?void 0:user.role)==='admin'?children:/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}// ============ APP ============\nfunction App(){return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Movies,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/movie/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(MovieDetail,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/seats/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(SeatSelection,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/payment\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Payment,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/confirmation\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Confirmation,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/bookings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(MyBookings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(AdminPanel,{})})})]})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","BrowserRouter","Routes","Route","Navigate","useNavigate","Link","useParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API","import","meta","env","API_URL","AuthContext","useAuth","AuthProvider","_ref","children","user","setUser","saved","localStorage","getItem","JSON","parse","city","setCity","login","data","setItem","stringify","selectedCity","logout","removeItem","updateCity","newCity","fetch","concat","method","headers","Authorization","token","body","Provider","value","Navbar","cities","setCities","showCities","setShowCities","navigate","then","r","json","className","onClick","style","cursor","display","alignItems","gap","map","c","name","_id","email","role","Login","setEmail","password","setPassword","error","setError","handleSubmit","e","preventDefault","res","ok","Error","err","message","onSubmit","type","placeholder","onChange","target","required","to","Signup","Movies","movies","setMovies","offers","setOffers","length","o","code","description","movie","src","poster","alt","onError","encodeURIComponent","avgRating","reviewCount","genre","duration","MovieDetail","_movie$reviews","id","setMovie","theatres","setTheatres","selectedDate","setSelectedDate","Date","toISOString","split","rating","setRating","comment","setComment","dates","Array","from","_","i","d","setDate","getDate","submitReview","movieId","language","toLocaleDateString","weekday","day","month","theatre","address","shows","show","time","price","s","fontSize","reviews","_r$userId","userId","repeat","SeatSelection","setShow","selectedSeats","setSelectedSeats","offerCode","setOfferCode","discount","setDiscount","toggleSeat","index","seats","prev","includes","filter","validateOffer","amount","proceedToPayment","showId","state","_objectSpread","bookingId","totalAmount","theatreId","date","booked","join","Payment","_window$history$state","bookingData","window","history","usr","processing","setProcessing","paymentMethod","setPaymentMethod","handlePayment","success","booking","originalAmount","checked","disabled","Confirmation","_window$history$state2","movieName","theatreName","showDate","showTime","MyBookings","bookings","setBookings","b","AdminPanel","stats","setStats","tab","setTab","newMovie","setNewMovie","newTheatre","setNewTheatre","newOffer","setNewOffer","discountPercent","maxDiscount","validFrom","validTo","addMovie","addTheatre","addOffer","deleteMovie","m","deleteTheatre","t","deleteOffer","charAt","toUpperCase","slice","totalUsers","totalBookings","totalRevenue","totalMovies","totalTheatres","_b$userId","ProtectedRoute","_ref2","AdminRoute","_ref3","App","path","element"],"sources":["C:/Users/AGNISHA/Desktop/book-my-show/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, Link, useParams } from 'react-router-dom';\n\nconst API = import.meta.env.API_URL;\n\n// ============ CONTEXT ============\nconst AuthContext = createContext();\nconst useAuth = () => useContext(AuthContext);\n\nfunction AuthProvider({ children }) {\n  const [user, setUser] = useState(() => {\n    const saved = localStorage.getItem('user');\n    return saved ? JSON.parse(saved) : null;\n  });\n  const [city, setCity] = useState(() => localStorage.getItem('city') || 'Mumbai');\n\n  const login = (data) => {\n    localStorage.setItem('user', JSON.stringify(data));\n    if (data.selectedCity) {\n      localStorage.setItem('city', data.selectedCity);\n      setCity(data.selectedCity);\n    }\n    setUser(data);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('user');\n    setUser(null);\n  };\n\n  const updateCity = async (newCity) => {\n    localStorage.setItem('city', newCity);\n    setCity(newCity);\n    if (user) {\n      await fetch(`${API}/user/city`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${user.token}` },\n        body: JSON.stringify({ city: newCity })\n      });\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout, city, updateCity }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\n// ============ NAVBAR ============\nfunction Navbar() {\n  const { user, logout, city, updateCity } = useAuth();\n  const [cities, setCities] = useState([]);\n  const [showCities, setShowCities] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetch(`${API}/cities`).then(r => r.json()).then(setCities);\n  }, []);\n\n  return (\n    <nav className=\"navbar\">\n      <h1 onClick={() => navigate('/')} style={{ cursor: 'pointer' }}>üé¨ BookMyShow</h1>\n      <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n        <div className=\"city-selector\" onClick={() => setShowCities(!showCities)}>\n          üìç {city} ‚ñº\n          {showCities && (\n            <div className=\"city-dropdown\">\n              {cities.map(c => (\n                <div key={c._id} onClick={() => { updateCity(c.name); setShowCities(false); }}>\n                  {c.name}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n        {user && (\n          <>\n            <span>{user.email}</span>\n            {user.role === 'admin' && <button onClick={() => navigate('/admin')}>Admin</button>}\n            <button onClick={() => navigate('/bookings')}>My Bookings</button>\n            <button onClick={() => { logout(); navigate('/login'); }}>Logout</button>\n          </>\n        )}\n      </div>\n    </nav>\n  );\n}\n\n// ============ AUTH ============\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`${API}/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error);\n      login(data);\n      navigate(data.role === 'admin' ? '/admin' : '/');\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Login</h2>\n      {error && <p className=\"error\">{error}</p>}\n      <form onSubmit={handleSubmit}>\n        <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required />\n        <input type=\"password\" placeholder=\"Password\" value={password} onChange={e => setPassword(e.target.value)} required />\n        <button type=\"submit\">Login</button>\n      </form>\n      <p>Don't have an account? <Link to=\"/signup\">Sign up</Link></p>\n    </div>\n  );\n}\n\nfunction Signup() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await fetch(`${API}/signup`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error);\n      login(data);\n      navigate('/');\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Sign Up</h2>\n      {error && <p className=\"error\">{error}</p>}\n      <form onSubmit={handleSubmit}>\n        <input type=\"email\" placeholder=\"Email\" value={email} onChange={e => setEmail(e.target.value)} required />\n        <input type=\"password\" placeholder=\"Password\" value={password} onChange={e => setPassword(e.target.value)} required />\n        <button type=\"submit\">Sign Up</button>\n      </form>\n      <p>Already have an account? <Link to=\"/login\">Login</Link></p>\n    </div>\n  );\n}\n\n// ============ MOVIES ============\nfunction Movies() {\n  const [movies, setMovies] = useState([]);\n  const [offers, setOffers] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetch(`${API}/movies`).then(r => r.json()).then(setMovies);\n    fetch(`${API}/offers`).then(r => r.json()).then(setOffers);\n  }, []);\n\n  return (\n    <div className=\"movies-container\">\n      {offers.length > 0 && (\n        <div className=\"offers-banner\">\n          <h3>üéâ Offers</h3>\n          <div className=\"offers-scroll\">\n            {offers.map(o => (\n              <div key={o._id} className=\"offer-card\">\n                <span className=\"offer-code\">{o.code}</span>\n                <p>{o.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      <h2>Now Showing</h2>\n      <div className=\"movies-grid\">\n        {movies.map(movie => (\n          <div key={movie._id} className=\"movie-card\" onClick={() => navigate(`/movie/${movie._id}`)}>\n            <img \n              src={movie.poster} \n              alt={movie.name}\n              onError={(e) => {\n                // Fallback for broken images\n                if (movie.name === 'Inception') {\n                  e.target.src = 'https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_FMjpg_UX1000_.jpg';\n                } else {\n                  e.target.src = 'https://via.placeholder.com/300x450?text=' + encodeURIComponent(movie.name);\n                }\n              }}\n            />\n            <div className=\"movie-info\">\n              <h3>{movie.name}</h3>\n              {movie.avgRating && (\n                <span className=\"rating\">‚≠ê {movie.avgRating} ({movie.reviewCount})</span>\n              )}\n              <span className=\"genre\">{movie.genre} ‚Ä¢ {movie.duration}</span>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// ============ MOVIE DETAIL ============\nfunction MovieDetail() {\n  const { id } = useParams();\n  const { city, user } = useAuth();\n  const [movie, setMovie] = useState(null);\n  const [theatres, setTheatres] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const navigate = useNavigate();\n\n  const dates = Array.from({ length: 5 }, (_, i) => {\n    const d = new Date();\n    d.setDate(d.getDate() + i);\n    return d.toISOString().split('T')[0];\n  });\n\n  useEffect(() => {\n    fetch(`${API}/movies/${id}`).then(r => r.json()).then(setMovie);\n  }, [id]);\n\n  useEffect(() => {\n    fetch(`${API}/theatres?city=${city}&movieId=${id}&date=${selectedDate}`)\n      .then(r => r.json()).then(setTheatres);\n  }, [city, id, selectedDate]);\n\n  const submitReview = async () => {\n    if (!rating) return;\n    await fetch(`${API}/reviews`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${user.token}` },\n      body: JSON.stringify({ movieId: id, rating, comment })\n    });\n    fetch(`${API}/movies/${id}`).then(r => r.json()).then(setMovie);\n    setRating(0);\n    setComment('');\n  };\n\n  if (!movie) return <div className=\"loading\">Loading...</div>;\n\n  return (\n    <div className=\"movie-detail\">\n      <div className=\"movie-header\">\n        <img \n          src={movie.poster} \n          alt={movie.name}\n          onError={(e) => {\n            // Fallback for broken images\n            if (movie.name === 'Inception') {\n              e.target.src = 'https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg';\n            } else {\n              e.target.src = 'https://via.placeholder.com/200x300?text=' + encodeURIComponent(movie.name);\n            }\n          }}\n        />\n        <div>\n          <h1>{movie.name}</h1>\n          <p>{movie.genre} ‚Ä¢ {movie.duration} ‚Ä¢ {movie.language}</p>\n          {movie.avgRating && <p className=\"rating-big\">‚≠ê {movie.avgRating}/5 ({movie.reviewCount} reviews)</p>}\n        </div>\n      </div>\n\n      <div className=\"date-selector\">\n        {dates.map(d => (\n          <button key={d} className={d === selectedDate ? 'active' : ''} onClick={() => setSelectedDate(d)}>\n            {new Date(d).toLocaleDateString('en-US', { weekday: 'short', day: 'numeric', month: 'short' })}\n          </button>\n        ))}\n      </div>\n\n      <h3>Theatres in {city}</h3>\n      {theatres.length === 0 ? (\n        <p className=\"no-shows\">No shows available for this date</p>\n      ) : (\n        <div className=\"theatres-list\">\n          {theatres.map(theatre => (\n            <div key={theatre._id} className=\"theatre-card\">\n              <div className=\"theatre-info\">\n                <h4>{theatre.name}</h4>\n                <p>{theatre.address}</p>\n              </div>\n              <div className=\"shows-times\">\n                {theatre.shows.map(show => (\n                  <button key={show._id} className=\"show-time-btn\" onClick={() => navigate(`/seats/${show._id}`)}>\n                    {show.time}\n                    <span className=\"price\">‚Çπ{show.price}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <div className=\"reviews-section\">\n        <h3>Reviews</h3>\n        {user && (\n          <div className=\"review-form\">\n            <div className=\"star-rating\">\n              {[1, 2, 3, 4, 5].map(s => (\n                <span key={s} onClick={() => setRating(s)} style={{ cursor: 'pointer', fontSize: '1.5rem' }}>\n                  {s <= rating ? '‚≠ê' : '‚òÜ'}\n                </span>\n              ))}\n            </div>\n            <textarea placeholder=\"Write your review...\" value={comment} onChange={e => setComment(e.target.value)} />\n            <button onClick={submitReview}>Submit Review</button>\n          </div>\n        )}\n        <div className=\"reviews-list\">\n          {movie.reviews?.map(r => (\n            <div key={r._id} className=\"review-card\">\n              <div className=\"review-header\">\n                <span>{r.userId?.email}</span>\n                <span>{'‚≠ê'.repeat(r.rating)}</span>\n              </div>\n              <p>{r.comment}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <button className=\"back-btn\" onClick={() => navigate('/')}>‚Üê Back to Movies</button>\n    </div>\n  );\n}\n\n// ============ SEAT SELECTION ============\nfunction SeatSelection() {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const [show, setShow] = useState(null);\n  const [selectedSeats, setSelectedSeats] = useState([]);\n  const [offerCode, setOfferCode] = useState('');\n  const [discount, setDiscount] = useState(0);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetch(`${API}/shows/${id}`).then(r => r.json()).then(setShow);\n  }, [id]);\n\n  const toggleSeat = (index) => {\n    if (show.seats[index]) return;\n    setSelectedSeats(prev => prev.includes(index) ? prev.filter(s => s !== index) : [...prev, index]);\n  };\n\n  const validateOffer = async () => {\n    const amount = selectedSeats.length * show.price;\n    const res = await fetch(`${API}/offers/validate`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${user.token}` },\n      body: JSON.stringify({ code: offerCode, amount })\n    });\n    const data = await res.json();\n    if (res.ok) {\n      setDiscount(data.discount);\n      setError('');\n    } else {\n      setError(data.error);\n      setDiscount(0);\n    }\n  };\n\n  const proceedToPayment = async () => {\n    const res = await fetch(`${API}/bookings`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${user.token}` },\n      body: JSON.stringify({ showId: id, seats: selectedSeats, offerCode: discount > 0 ? offerCode : null })\n    });\n    const data = await res.json();\n    if (res.ok) {\n      navigate('/payment', { state: { bookingId: data.bookingId, ...data, show } });\n    } else {\n      setError(data.error);\n    }\n  };\n\n  if (!show) return <div className=\"loading\">Loading...</div>;\n\n  const totalAmount = selectedSeats.length * show.price - discount;\n\n  return (\n    <div className=\"seats-container\">\n      <h2>{show.movieId.name}</h2>\n      <p className=\"show-info\">{show.theatreId.name} | {show.date} | {show.time}</p>\n      \n      <div className=\"screen\">SCREEN</div>\n      \n      <div className=\"seats-grid\">\n        {show.seats.map((booked, i) => (\n          <div\n            key={i}\n            className={`seat ${booked ? 'booked' : ''} ${selectedSeats.includes(i) ? 'selected' : ''}`}\n            onClick={() => toggleSeat(i)}\n          >\n            {i + 1}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"seat-legend\">\n        <div className=\"legend-item\"><div className=\"legend-box available\"></div><span>Available</span></div>\n        <div className=\"legend-item\"><div className=\"legend-box selected\"></div><span>Selected</span></div>\n        <div className=\"legend-item\"><div className=\"legend-box booked\"></div><span>Booked</span></div>\n      </div>\n\n      {selectedSeats.length > 0 && (\n        <div className=\"booking-summary\">\n          <div className=\"offer-input\">\n            <input placeholder=\"Enter offer code\" value={offerCode} onChange={e => setOfferCode(e.target.value)} />\n            <button onClick={validateOffer}>Apply</button>\n          </div>\n          {error && <p className=\"error\">{error}</p>}\n          <div className=\"price-breakdown\">\n            <p>Seats: {selectedSeats.map(s => s + 1).join(', ')}</p>\n            <p>Price: ‚Çπ{show.price} √ó {selectedSeats.length} = ‚Çπ{selectedSeats.length * show.price}</p>\n            {discount > 0 && <p className=\"discount\">Discount: -‚Çπ{discount}</p>}\n            <p className=\"total\">Total: ‚Çπ{totalAmount}</p>\n          </div>\n          <button className=\"confirm-btn\" onClick={proceedToPayment}>Proceed to Payment</button>\n        </div>\n      )}\n\n      <button className=\"back-btn\" onClick={() => navigate(-1)}>‚Üê Back</button>\n    </div>\n  );\n}\n\n// ============ PAYMENT ============\nfunction Payment() {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const bookingData = window.history.state?.usr;\n  const [processing, setProcessing] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('card');\n\n  if (!bookingData) return <Navigate to=\"/\" />;\n\n  const handlePayment = async () => {\n    setProcessing(true);\n    const res = await fetch(`${API}/payment`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${user.token}` },\n      body: JSON.stringify({ bookingId: bookingData.bookingId, paymentMethod })\n    });\n    const data = await res.json();\n    setProcessing(false);\n    if (data.success) {\n      navigate('/confirmation', { state: data.booking });\n    }\n  };\n\n  return (\n    <div className=\"payment-container\">\n      <h2>Payment</h2>\n      <div className=\"payment-summary\">\n        <h3>{bookingData.show.movieId.name}</h3>\n        <p>{bookingData.show.theatreId.name}</p>\n        <p>{bookingData.show.date} | {bookingData.show.time}</p>\n        <p>Seats: {bookingData.show && bookingData.originalAmount / bookingData.show.price} seats</p>\n        <hr />\n        <p>Subtotal: ‚Çπ{bookingData.originalAmount}</p>\n        {bookingData.discount > 0 && <p className=\"discount\">Discount: -‚Çπ{bookingData.discount}</p>}\n        <p className=\"total-big\">Total: ‚Çπ{bookingData.totalAmount}</p>\n      </div>\n\n      <div className=\"payment-methods\">\n        <h3>Select Payment Method</h3>\n        {['card', 'upi', 'netbanking', 'wallet'].map(method => (\n          <label key={method} className={`payment-option ${paymentMethod === method ? 'selected' : ''}`}>\n            <input type=\"radio\" name=\"payment\" value={method} checked={paymentMethod === method} onChange={e => setPaymentMethod(e.target.value)} />\n            {method === 'card' && 'üí≥ Credit/Debit Card'}\n            {method === 'upi' && 'üì± UPI'}\n            {method === 'netbanking' && 'üè¶ Net Banking'}\n            {method === 'wallet' && 'üëõ Wallet'}\n          </label>\n        ))}\n      </div>\n\n      <button className=\"pay-btn\" onClick={handlePayment} disabled={processing}>\n        {processing ? 'Processing...' : `Pay ‚Çπ${bookingData.totalAmount}`}\n      </button>\n    </div>\n  );\n}\n\n// ============ CONFIRMATION ============\nfunction Confirmation() {\n  const navigate = useNavigate();\n  const booking = window.history.state?.usr;\n\n  if (!booking) return <Navigate to=\"/\" />;\n\n  return (\n    <div className=\"confirmation-container\">\n      <div className=\"checkmark\">‚úì</div>\n      <h2>Booking Confirmed!</h2>\n      <div className=\"ticket\">\n        <div className=\"ticket-header\">\n          <h3>{booking.movieName}</h3>\n        </div>\n        <div className=\"ticket-body\">\n          <p><span>Theatre:</span> {booking.theatreName}</p>\n          <p><span>Date:</span> {booking.showDate}</p>\n          <p><span>Time:</span> {booking.showTime}</p>\n          <p><span>Seats:</span> {booking.seats.join(', ')}</p>\n          <p><span>Amount Paid:</span> ‚Çπ{booking.totalAmount}</p>\n          <p><span>Booking ID:</span> {booking.id}</p>\n        </div>\n      </div>\n      <button className=\"confirm-btn\" onClick={() => navigate('/')}>Book More Tickets</button>\n    </div>\n  );\n}\n\n// ============ MY BOOKINGS ============\nfunction MyBookings() {\n  const { user } = useAuth();\n  const [bookings, setBookings] = useState([]);\n\n  useEffect(() => {\n    fetch(`${API}/bookings`, {\n      headers: { Authorization: `Bearer ${user.token}` }\n    }).then(r => r.json()).then(setBookings);\n  }, [user]);\n\n  return (\n    <div className=\"bookings-container\">\n      <h2>My Bookings</h2>\n      {bookings.length === 0 ? (\n        <p>No bookings yet</p>\n      ) : (\n        <div className=\"bookings-list\">\n          {bookings.map(b => (\n            <div key={b._id} className=\"booking-card\">\n              <h3>{b.movieName}</h3>\n              <p>{b.theatreName}</p>\n              <p>{b.showDate} | {b.showTime}</p>\n              <p>Seats: {b.seats.join(', ')}</p>\n              <p className=\"amount\">‚Çπ{b.totalAmount}</p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============ ADMIN PANEL ============\nfunction AdminPanel() {\n  const { user } = useAuth();\n  const [stats, setStats] = useState({});\n  const [tab, setTab] = useState('dashboard');\n  const [movies, setMovies] = useState([]);\n  const [theatres, setTheatres] = useState([]);\n  const [offers, setOffers] = useState([]);\n  const [bookings, setBookings] = useState([]);\n\n  const headers = { Authorization: `Bearer ${user.token}`, 'Content-Type': 'application/json' };\n\n  useEffect(() => {\n    fetch(`${API}/admin/stats`, { headers }).then(r => r.json()).then(setStats);\n    fetch(`${API}/movies`).then(r => r.json()).then(setMovies);\n    fetch(`${API}/theatres`).then(r => r.json()).then(setTheatres);\n    fetch(`${API}/offers`).then(r => r.json()).then(setOffers);\n    fetch(`${API}/admin/bookings`, { headers }).then(r => r.json()).then(setBookings);\n  }, []);\n\n  const [newMovie, setNewMovie] = useState({ name: '', poster: '', genre: '', duration: '', language: '' });\n  const [newTheatre, setNewTheatre] = useState({ name: '', city: '', address: '' });\n  const [newOffer, setNewOffer] = useState({ code: '', description: '', discountPercent: 0, maxDiscount: 0, validFrom: '', validTo: '' });\n\n  const addMovie = async () => {\n    await fetch(`${API}/admin/movies`, { method: 'POST', headers, body: JSON.stringify(newMovie) });\n    fetch(`${API}/movies`).then(r => r.json()).then(setMovies);\n    setNewMovie({ name: '', poster: '', genre: '', duration: '', language: '' });\n  };\n\n  const addTheatre = async () => {\n    await fetch(`${API}/admin/theatres`, { method: 'POST', headers, body: JSON.stringify(newTheatre) });\n    fetch(`${API}/theatres`).then(r => r.json()).then(setTheatres);\n    setNewTheatre({ name: '', city: '', address: '' });\n  };\n\n  const addOffer = async () => {\n    await fetch(`${API}/admin/offers`, { method: 'POST', headers, body: JSON.stringify(newOffer) });\n    fetch(`${API}/offers`).then(r => r.json()).then(setOffers);\n    setNewOffer({ code: '', description: '', discountPercent: 0, maxDiscount: 0, validFrom: '', validTo: '' });\n  };\n\n  const deleteMovie = async (id) => {\n    await fetch(`${API}/admin/movies/${id}`, { method: 'DELETE', headers });\n    setMovies(movies.filter(m => m._id !== id));\n  };\n\n  const deleteTheatre = async (id) => {\n    await fetch(`${API}/admin/theatres/${id}`, { method: 'DELETE', headers });\n    setTheatres(theatres.filter(t => t._id !== id));\n  };\n\n  const deleteOffer = async (id) => {\n    await fetch(`${API}/admin/offers/${id}`, { method: 'DELETE', headers });\n    setOffers(offers.filter(o => o._id !== id));\n  };\n\n  return (\n    <div className=\"admin-container\">\n      <h2>Admin Panel</h2>\n      <div className=\"admin-tabs\">\n        {['dashboard', 'movies', 'theatres', 'offers', 'bookings'].map(t => (\n          <button key={t} className={tab === t ? 'active' : ''} onClick={() => setTab(t)}>\n            {t.charAt(0).toUpperCase() + t.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      {tab === 'dashboard' && (\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\"><h3>{stats.totalUsers}</h3><p>Users</p></div>\n          <div className=\"stat-card\"><h3>{stats.totalBookings}</h3><p>Bookings</p></div>\n          <div className=\"stat-card\"><h3>‚Çπ{stats.totalRevenue}</h3><p>Revenue</p></div>\n          <div className=\"stat-card\"><h3>{stats.totalMovies}</h3><p>Movies</p></div>\n          <div className=\"stat-card\"><h3>{stats.totalTheatres}</h3><p>Theatres</p></div>\n        </div>\n      )}\n\n      {tab === 'movies' && (\n        <div className=\"admin-section\">\n          <h3>Add Movie</h3>\n          <div className=\"admin-form\">\n            <input placeholder=\"Name\" value={newMovie.name} onChange={e => setNewMovie({ ...newMovie, name: e.target.value })} />\n            <input placeholder=\"Poster URL\" value={newMovie.poster} onChange={e => setNewMovie({ ...newMovie, poster: e.target.value })} />\n            <input placeholder=\"Genre\" value={newMovie.genre} onChange={e => setNewMovie({ ...newMovie, genre: e.target.value })} />\n            <input placeholder=\"Duration\" value={newMovie.duration} onChange={e => setNewMovie({ ...newMovie, duration: e.target.value })} />\n            <input placeholder=\"Language\" value={newMovie.language} onChange={e => setNewMovie({ ...newMovie, language: e.target.value })} />\n            <button onClick={addMovie}>Add Movie</button>\n          </div>\n          <div className=\"admin-list\">\n            {movies.map(m => (\n              <div key={m._id} className=\"admin-item\">\n                <span>{m.name}</span>\n                <button onClick={() => deleteMovie(m._id)}>Delete</button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {tab === 'theatres' && (\n        <div className=\"admin-section\">\n          <h3>Add Theatre</h3>\n          <div className=\"admin-form\">\n            <input placeholder=\"Name\" value={newTheatre.name} onChange={e => setNewTheatre({ ...newTheatre, name: e.target.value })} />\n            <input placeholder=\"City\" value={newTheatre.city} onChange={e => setNewTheatre({ ...newTheatre, city: e.target.value })} />\n            <input placeholder=\"Address\" value={newTheatre.address} onChange={e => setNewTheatre({ ...newTheatre, address: e.target.value })} />\n            <button onClick={addTheatre}>Add Theatre</button>\n          </div>\n          <div className=\"admin-list\">\n            {theatres.map(t => (\n              <div key={t._id} className=\"admin-item\">\n                <span>{t.name} - {t.city}</span>\n                <button onClick={() => deleteTheatre(t._id)}>Delete</button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {tab === 'offers' && (\n        <div className=\"admin-section\">\n          <h3>Add Offer</h3>\n          <div className=\"admin-form\">\n            <input placeholder=\"Code\" value={newOffer.code} onChange={e => setNewOffer({ ...newOffer, code: e.target.value })} />\n            <input placeholder=\"Description\" value={newOffer.description} onChange={e => setNewOffer({ ...newOffer, description: e.target.value })} />\n            <input type=\"number\" placeholder=\"Discount %\" value={newOffer.discountPercent} onChange={e => setNewOffer({ ...newOffer, discountPercent: +e.target.value })} />\n            <input type=\"number\" placeholder=\"Max Discount\" value={newOffer.maxDiscount} onChange={e => setNewOffer({ ...newOffer, maxDiscount: +e.target.value })} />\n            <input type=\"date\" value={newOffer.validFrom} onChange={e => setNewOffer({ ...newOffer, validFrom: e.target.value })} />\n            <input type=\"date\" value={newOffer.validTo} onChange={e => setNewOffer({ ...newOffer, validTo: e.target.value })} />\n            <button onClick={addOffer}>Add Offer</button>\n          </div>\n          <div className=\"admin-list\">\n            {offers.map(o => (\n              <div key={o._id} className=\"admin-item\">\n                <span>{o.code} - {o.description}</span>\n                <button onClick={() => deleteOffer(o._id)}>Delete</button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {tab === 'bookings' && (\n        <div className=\"admin-section\">\n          <h3>Recent Bookings</h3>\n          <div className=\"admin-list\">\n            {bookings.map(b => (\n              <div key={b._id} className=\"admin-item booking\">\n                <span>{b.userId?.email} - {b.movieName} - {b.showDate} {b.showTime} - Seats: {b.seats.join(',')} - ‚Çπ{b.totalAmount}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ============ PROTECTED ROUTES ============\nfunction ProtectedRoute({ children }) {\n  const { user } = useAuth();\n  return user ? children : <Navigate to=\"/login\" />;\n}\n\nfunction AdminRoute({ children }) {\n  const { user } = useAuth();\n  return user?.role === 'admin' ? children : <Navigate to=\"/\" />;\n}\n\n// ============ APP ============\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <div className=\"app\">\n          <Navbar />\n          <Routes>\n            <Route path=\"/login\" element={<Login />} />\n            <Route path=\"/signup\" element={<Signup />} />\n            <Route path=\"/\" element={<ProtectedRoute><Movies /></ProtectedRoute>} />\n            <Route path=\"/movie/:id\" element={<ProtectedRoute><MovieDetail /></ProtectedRoute>} />\n            <Route path=\"/seats/:id\" element={<ProtectedRoute><SeatSelection /></ProtectedRoute>} />\n            <Route path=\"/payment\" element={<ProtectedRoute><Payment /></ProtectedRoute>} />\n            <Route path=\"/confirmation\" element={<ProtectedRoute><Confirmation /></ProtectedRoute>} />\n            <Route path=\"/bookings\" element={<ProtectedRoute><MyBookings /></ProtectedRoute>} />\n            <Route path=\"/admin\" element={<AdminRoute><AdminPanel /></AdminRoute>} />\n          </Routes>\n        </div>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}